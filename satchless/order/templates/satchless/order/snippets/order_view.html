{% load i18n prices %}
{% for group in order.groups.all %}
<table>
    <thead>
        {% if order.groups.count > 1 %}
        <tr>
            <th colspan="4">
            {% blocktrans %}Delivery group #{{ forloop.counter }}{% endblocktrans %}
            </th>
        </tr>
        {% endif %}
        <tr>
            <th>{% trans "Item" %}</th>
            <th>{% trans "Qty." %}</th>
            <th>{% trans "Unit price" %}</th>
            <th>{% trans "Price" %}</th>
        </tr>
    </thead>
    <tfoot>
        {% if group.delivery_variant %}
        <tr>
            <th>{% trans "Delivery" %}:</th>
            <td colspan="2">{{ group.delivery_variant }}</td>
            <td class="numerical">{{ group.delivery_variant.price|floatformat:2 }}</td>
        </tr>
        {% endif %}
        <tr>
            <th colspan="3">{% trans "Total" %}:</th>
            <td class="numerical">{{ group.total|gross|floatformat:2 }}</td>
        </tr>
    </tfoot>
    <tbody>
        {% for item in group.items.all %}
        <tr>
            <td>{{ item.product_name }}</td>
            <td class="numerical">{{ item.quantity }}</td>
            <td><span class="gross">{{ item.unit_price_gross|floatformat:2 }}</span></td>
            <td class="numerical">{{ item.price|gross|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endfor %}
<p>Total amount to pay: {{ order.total|gross|floatformat:2 }} <span class="currency">{{ order.currency }}</span></p>
{% if order.payment_variant %}
<p>{% trans "Payment method" %}: {{ order.payment_method }}
{% endif %}
